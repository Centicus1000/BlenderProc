<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>blenderproc.python.renderer.RendererUtility &mdash; BlenderProc 2.7.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme_overrides.css?v=034b4ec4" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=dfec817d"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            BlenderProc
          </a>
              <div class="version">
                2.7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="docs/tutorials/loader.html">Loading and manipulating objects</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="docs/tutorials/camera.html">Configuring the camera</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="docs/tutorials/renderer.html">Rendering the scene</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="docs/tutorials/writer.html">Writing the results to file</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="docs/tutorials/key_frames.html">How key frames work</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="docs/tutorials/physics.html">Positioning objects via the physics simulator</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="examples/basics/README.html">Basics</a><ul>
<li class="toctree-l2"><a class="reference external" href="examples/basics/basic/README.html">basic</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/basics/camera_object_pose/README.html">camera_object_pose</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/basics/camera_sampling/README.html">camera_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/basics/entity_manipulation/README.html">entity_manipulation</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/basics/light_sampling/README.html">light_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/basics/material_manipulation/README.html">material_manipulation</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/basics/physics_positioning/README.html">physics_positioning</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/basics/semantic_segmentation/README.html">semantic_segmentation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="examples/advanced/README.html">Advanced</a><ul>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/auto_shading/README.html">auto_shading</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/calibration/README.html">calibration</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/camera_depth_of_field/README.html">camera_depth_of_field</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/camera_random_trajectories/README.html">camera_random_trajectories</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/coco_annotations/README.html">coco_annotations</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/diffuse_color_image/README.html">diffuse_color_image</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/dust/README.html">dust</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/entity_displacement_modifier/README.html">entity_displacement_modifier</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/gif_animation/README.html">gif_animation</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/kinect_azure_noise/README.html">kinect_azure_noise</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/lens_distortion/README.html">lens_distortion</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/material_randomizer/README.html">material_randomizer</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/motion_blur_rolling_shutter/README.html">motion_blur_rolling_shutter</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/multi_render/README.html">multi_render</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/nocs/README.html">nocs</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/object_pose_sampling/README.html">object_pose_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/on_surface_object_sampling/README.html">on_surface_object_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/optical_flow/README.html">optical_flow</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/physics_convex_decomposition/README.html">physics_convex_decomposition</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/point_clouds/README.html">point_clouds</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/random_backgrounds/README.html">random_backgrounds</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/random_room_constructor/README.html">random_room_constructor</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/spotlight/README.html">spotlight</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/stereo_matching/README.html">stereo_matching</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/stereo_matching_with_projector/README.html">stereo_matching_with_projector</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/advanced/urdf_loading_and_manipulation/README.html">urdf_loading_and_manipulation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="examples/datasets/README.html">Datasets</a><ul>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/amass_human_poses/README.html">amass_human_poses</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/blenderkit/README.html">blenderkit</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/bop_challenge/README.html">bop_challenge</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/bop_object_on_surface_sampling/README.html">bop_object_on_surface_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/bop_object_physics_positioning/README.html">bop_object_physics_positioning</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/bop_object_pose_sampling/README.html">bop_object_pose_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/bop_scene_replication/README.html">bop_scene_replication</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/front_3d/README.html">front_3d</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/front_3d_object_sampling/README.html">front_3d_object_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/front_3d_with_improved_mat/README.html">front_3d_with_improved_mat</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/haven/README.html">haven</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/ikea/README.html">ikea</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/matterport3d/README.html">matterport3d</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/pix3d/README.html">pix3d</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/replica/README.html">replica</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/scenenet/README.html">scenenet</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/scenenet_with_cctextures/README.html">scenenet_with_cctextures</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/shapenet/README.html">shapenet</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/shapenet_with_scenenet/README.html">shapenet_with_scenenet</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/shapenet_with_suncg/README.html">shapenet_with_suncg</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/suncg_basic/README.html">suncg_basic</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/suncg_with_cam_sampling/README.html">suncg_with_cam_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/suncg_with_improved_mat/README.html">suncg_with_improved_mat</a></li>
<li class="toctree-l2"><a class="reference external" href="examples/datasets/suncg_with_object_replacer/README.html">suncg_with_object_replacer</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Entities (bproc.types)</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.ArmatureUtility.html#blenderproc.python.types.ArmatureUtility.Armature">Armature</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.EntityUtility.html#blenderproc.python.types.EntityUtility.Entity">Entity</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.LightUtility.html#blenderproc.python.types.LightUtility.Light">Light</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.MaterialUtility.html#blenderproc.python.types.MaterialUtility.Material">Material</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.MeshObjectUtility.html#blenderproc.python.types.MeshObjectUtility.MeshObject">MeshObject</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.StructUtility.html#blenderproc.python.types.StructUtility.Struct">Struct</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.URDFUtility.html#blenderproc.python.types.URDFUtility.URDFObject">URDFObject</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.InertialUtility.html#blenderproc.python.types.InertialUtility.Inertial">Inertial</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.LinkUtility.html#blenderproc.python.types.LinkUtility.Link">Link</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Api</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.camera.html#module-blenderproc.camera">bproc.camera</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.constructor.html#module-blenderproc.constructor">bproc.constructor</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.filter.html#module-blenderproc.filter">bproc.filter</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.lighting.html#module-blenderproc.lighting">bproc.lighting</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.loader.html#module-blenderproc.loader">bproc.loader</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.material.html#module-blenderproc.material">bproc.material</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.math.html#module-blenderproc.math">bproc.math</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.object.html#module-blenderproc.object">bproc.object</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.postprocessing.html#module-blenderproc.postprocessing">bproc.postprocessing</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.renderer.html#module-blenderproc.renderer">bproc.renderer</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.sampler.html#module-blenderproc.sampler">bproc.sampler</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.types.html#module-blenderproc.types">bproc.types</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.utility.html#module-blenderproc.utility">bproc.utility</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.world.html#module-blenderproc.world">bproc.world</a></li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.api.writer.html#module-blenderproc.writer">bproc.writer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Internal</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.sampler.html">bproc.python.sampler</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.sampler.Front3DPointInRoomSampler.html#blenderproc.python.sampler.Front3DPointInRoomSampler.Front3DPointInRoomSampler">Front3DPointInRoomSampler</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.sampler.ReplicaPointInRoomSampler.html#blenderproc.python.sampler.ReplicaPointInRoomSampler.ReplicaPointInRoomSampler">ReplicaPointInRoomSampler</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.sampler.SuncgPointInRoomSampler.html#blenderproc.python.sampler.SuncgPointInRoomSampler.SuncgPointInRoomSampler">SuncgPointInRoomSampler</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.sampler.Disk.html#blenderproc.python.sampler.Disk._Disk">_Disk</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.sampler.UniformSO3.html#blenderproc.python.sampler.UniformSO3._UniformSO3">_UniformSO3</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.sampler.UpperRegionSampler.html#blenderproc.python.sampler.UpperRegionSampler.Region2D">Region2D</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.types.html">bproc.python.types</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.ArmatureUtility.html#blenderproc.python.types.ArmatureUtility.Armature">Armature</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.EntityUtility.html#blenderproc.python.types.EntityUtility.Entity">Entity</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.LightUtility.html#blenderproc.python.types.LightUtility.Light">Light</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.MaterialUtility.html#blenderproc.python.types.MaterialUtility.Material">Material</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.MeshObjectUtility.html#blenderproc.python.types.MeshObjectUtility.MeshObject">MeshObject</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.StructUtility.html#blenderproc.python.types.StructUtility.Struct">Struct</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.URDFUtility.html#blenderproc.python.types.URDFUtility.URDFObject">URDFObject</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.InertialUtility.html#blenderproc.python.types.InertialUtility.Inertial">Inertial</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.types.LinkUtility.html#blenderproc.python.types.LinkUtility.Link">Link</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.utility.html">bproc.python.utility</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.BlockStopWatch">BlockStopWatch</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.LabelIdMapping.html#blenderproc.python.utility.LabelIdMapping.LabelIdMapping">LabelIdMapping</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.UndoAfterExecution">UndoAfterExecution</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.CollisionUtility.html#blenderproc.python.utility.CollisionUtility.CollisionUtility">CollisionUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.DefaultConfig.html#blenderproc.python.utility.DefaultConfig.DefaultConfig">DefaultConfig</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.GlobalStorage.html#blenderproc.python.utility.GlobalStorage.GlobalStorage">GlobalStorage</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.Initializer.html#blenderproc.python.utility.Initializer._Initializer">_Initializer</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.InstallUtility.html#blenderproc.python.utility.InstallUtility.InstallUtility">InstallUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.MaterialGetter.html#blenderproc.python.utility.MaterialGetter.MaterialGetter">MaterialGetter</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.MathUtility.html#blenderproc.python.utility.MathUtility.MathUtility">MathUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.SetupUtility.html#blenderproc.python.utility.SetupUtility.SetupUtility">SetupUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.KeyFrame">KeyFrame</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.NumpyEncoder">NumpyEncoder</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.Utility">Utility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility._KeyFrameState">_KeyFrameState</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.filter.html">bproc.python.filter</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.filter.Filter.html#blenderproc.python.filter.Filter._Filter">_Filter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.lighting.html">bproc.python.lighting</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.lighting.SuncgLighting.html#blenderproc.python.lighting.SuncgLighting._SuncgLighting">_SuncgLighting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.loader.html">bproc.python.loader</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.AMASSLoader.html#blenderproc.python.loader.AMASSLoader._AMASSLoader">_AMASSLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.BlendLoader.html#blenderproc.python.loader.BlendLoader._BlendLoader">_BlendLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.BopLoader.html#blenderproc.python.loader.BopLoader._BopLoader">_BopLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.CCMaterialLoader.html#blenderproc.python.loader.CCMaterialLoader._CCMaterialLoader">_CCMaterialLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.Front3DLoader.html#blenderproc.python.loader.Front3DLoader._Front3DLoader">_Front3DLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.HavenMaterialLoader.html#blenderproc.python.loader.HavenMaterialLoader.HavenMaterialLoader">HavenMaterialLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.IKEALoader.html#blenderproc.python.loader.IKEALoader._IKEALoader">_IKEALoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.Pix3DLoader.html#blenderproc.python.loader.Pix3DLoader._Pix3DLoader">_Pix3DLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.RockEssentialsRockLoader.html#blenderproc.python.loader.RockEssentialsRockLoader.RockEssentialsRockLoader">RockEssentialsRockLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.SceneNetLoader.html#blenderproc.python.loader.SceneNetLoader._SceneNetLoader">_SceneNetLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.ShapeNetLoader.html#blenderproc.python.loader.ShapeNetLoader._ShapeNetLoader">_ShapeNetLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.SuncgLoader.html#blenderproc.python.loader.SuncgLoader._SuncgLoader">_SuncgLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.loader.TextureLoader.html#blenderproc.python.loader.TextureLoader._TextureLoader">_TextureLoader</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.object.html">bproc.python.object</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.object.FaceSlicer.html#blenderproc.python.object.FaceSlicer.FaceSlicer">FaceSlicer</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.object.ObjectReplacer.html#blenderproc.python.object.ObjectReplacer._ObjectReplacer">_ObjectReplacer</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.object.OnSurfaceSampler.html#blenderproc.python.object.OnSurfaceSampler._OnSurfaceSampler">_OnSurfaceSampler</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.object.PhysicsSimulation.html#blenderproc.python.object.PhysicsSimulation._PhysicsSimulation">_PhysicsSimulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.postprocessing.html">bproc.python.postprocessing</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.postprocessing.PostProcessingUtility.html#blenderproc.python.postprocessing.PostProcessingUtility._PostProcessingUtility">_PostProcessingUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.postprocessing.StereoGlobalMatching.html#blenderproc.python.postprocessing.StereoGlobalMatching._StereoGlobalMatching">_StereoGlobalMatching</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference external" href="blenderproc.python.renderer.html">bproc.python.renderer</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.renderer.FlowRendererUtility.html#blenderproc.python.renderer.FlowRendererUtility._FlowRendererUtility">_FlowRendererUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.renderer.NOCSRendererUtility.html#blenderproc.python.renderer.NOCSRendererUtility._NOCSRendererUtility">_NOCSRendererUtility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.tests.html">bproc.python.tests</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.tests.SilentMode.html#blenderproc.python.tests.SilentMode.SilentMode">SilentMode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="blenderproc.python.writer.html">bproc.python.writer</a><ul>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.writer.BopWriterUtility.html#blenderproc.python.writer.BopWriterUtility._BopWriterUtility">_BopWriterUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.writer.CocoWriterUtility.html#blenderproc.python.writer.CocoWriterUtility._CocoWriterUtility">_CocoWriterUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.writer.GifWriterUtility.html#blenderproc.python.writer.GifWriterUtility._GifWriterUtility">_GifWriterUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="blenderproc.python.writer.WriterUtility.html#blenderproc.python.writer.WriterUtility._WriterUtility">_WriterUtility</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">BlenderProc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">blenderproc.python.renderer.RendererUtility</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for blenderproc.python.renderer.RendererUtility</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Provides functionality to render a color, normal, depth and distance image.&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">IO</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">mathutils</span>
<span class="kn">import</span> <span class="nn">bpy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">rich.console</span> <span class="kn">import</span> <span class="n">Console</span>
<span class="kn">from</span> <span class="nn">rich.progress</span> <span class="kn">import</span> <span class="n">Progress</span><span class="p">,</span> <span class="n">TextColumn</span><span class="p">,</span> <span class="n">BarColumn</span><span class="p">,</span> <span class="n">TimeRemainingColumn</span>

<span class="kn">from</span> <span class="nn">blenderproc.python.camera</span> <span class="kn">import</span> <span class="n">CameraUtility</span>
<span class="kn">from</span> <span class="nn">blenderproc.python.utility.GlobalStorage</span> <span class="kn">import</span> <span class="n">GlobalStorage</span>
<span class="kn">from</span> <span class="nn">blenderproc.python.utility.BlenderUtility</span> <span class="kn">import</span> <span class="n">get_all_blender_mesh_objects</span>
<span class="kn">from</span> <span class="nn">blenderproc.python.utility.DefaultConfig</span> <span class="kn">import</span> <span class="n">DefaultConfig</span>
<span class="kn">from</span> <span class="nn">blenderproc.python.utility.Utility</span> <span class="kn">import</span> <span class="n">Utility</span><span class="p">,</span> <span class="n">stdout_redirected</span>
<span class="kn">from</span> <span class="nn">blenderproc.python.writer.WriterUtility</span> <span class="kn">import</span> <span class="n">_WriterUtility</span>


<div class="viewcode-block" id="set_denoiser">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_denoiser">[docs]</a>
<span class="k">def</span> <span class="nf">set_denoiser</span><span class="p">(</span><span class="n">denoiser</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables the specified denoiser.</span>

<span class="sd">    Automatically disables all previously activated denoiser.</span>

<span class="sd">    :param denoiser: The name of the denoiser which should be enabled. Options are &quot;INTEL&quot;, &quot;OPTIX&quot; and None. \</span>
<span class="sd">                     If None is given, then no denoiser will be active.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Make sure there is no denoiser active</span>
    <span class="n">disable_all_denoiser</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">denoiser</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">denoiser</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;OPTIX&quot;</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">use_denoising</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">view_layer</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">use_denoising</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">denoiser</span> <span class="o">=</span> <span class="s2">&quot;OPTIX&quot;</span>
    <span class="k">elif</span> <span class="n">denoiser</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;INTEL&quot;</span><span class="p">:</span>
        <span class="c1"># The intel denoiser is activated via the compositor</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">nodes</span>
        <span class="n">links</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">links</span>

        <span class="c1"># The denoiser gets normal and diffuse color as input</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">view_layer</span><span class="o">.</span><span class="n">use_pass_normal</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">view_layer</span><span class="o">.</span><span class="n">use_pass_diffuse_color</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Add denoiser node</span>
        <span class="n">denoise_node</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeDenoise&quot;</span><span class="p">)</span>

        <span class="c1"># Link nodes</span>
        <span class="n">render_layer_node</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_the_one_node_with_type</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="s1">&#39;CompositorNodeRLayers&#39;</span><span class="p">)</span>
        <span class="n">composite_node</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_the_one_node_with_type</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="s1">&#39;CompositorNodeComposite&#39;</span><span class="p">)</span>
        <span class="n">Utility</span><span class="o">.</span><span class="n">insert_node_instead_existing_link</span><span class="p">(</span><span class="n">links</span><span class="p">,</span>
                                                  <span class="n">render_layer_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">],</span>
                                                  <span class="n">denoise_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">],</span>
                                                  <span class="n">denoise_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">],</span>
                                                  <span class="n">composite_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">])</span>

        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">render_layer_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;DiffCol&#39;</span><span class="p">],</span> <span class="n">denoise_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Albedo&#39;</span><span class="p">])</span>
        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">render_layer_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;Normal&#39;</span><span class="p">],</span> <span class="n">denoise_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Normal&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No such denoiser: &quot;</span> <span class="o">+</span> <span class="n">denoiser</span><span class="p">)</span></div>



<div class="viewcode-block" id="set_light_bounces">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_light_bounces">[docs]</a>
<span class="k">def</span> <span class="nf">set_light_bounces</span><span class="p">(</span><span class="n">diffuse_bounces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">glossy_bounces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">ao_bounces_render</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_bounces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">transmission_bounces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">transparent_max_bounces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">volume_bounces</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the number of light bounces that should be used by the raytracing renderer.</span>
<span class="sd">    Default values are defined in DefaultConfig.py</span>

<span class="sd">    :param diffuse_bounces: Maximum number of diffuse reflection bounces, bounded by total maximum.</span>
<span class="sd">    :param glossy_bounces: Maximum number of glossy reflection bounces, bounded by total maximum.</span>
<span class="sd">    :param ao_bounces_render: Approximate indirect light with background tinted ambient occlusion at the \</span>
<span class="sd">                              specified bounce, 0 disables this feature.</span>
<span class="sd">    :param max_bounces: Total maximum number of bounces.</span>
<span class="sd">    :param transmission_bounces: Maximum number of transmission bounces, bounded by total maximum.</span>
<span class="sd">    :param transparent_max_bounces: Maximum number of transparent bounces.</span>
<span class="sd">    :param volume_bounces: Maximum number of volumetric scattering events.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">diffuse_bounces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">diffuse_bounces</span> <span class="o">=</span> <span class="n">diffuse_bounces</span>
    <span class="k">if</span> <span class="n">glossy_bounces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">glossy_bounces</span> <span class="o">=</span> <span class="n">glossy_bounces</span>
    <span class="k">if</span> <span class="n">ao_bounces_render</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">ao_bounces_render</span> <span class="o">=</span> <span class="n">ao_bounces_render</span>
    <span class="k">if</span> <span class="n">max_bounces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">max_bounces</span> <span class="o">=</span> <span class="n">max_bounces</span>
    <span class="k">if</span> <span class="n">transmission_bounces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">transmission_bounces</span> <span class="o">=</span> <span class="n">transmission_bounces</span>
    <span class="k">if</span> <span class="n">transparent_max_bounces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">transparent_max_bounces</span> <span class="o">=</span> <span class="n">transparent_max_bounces</span>
    <span class="k">if</span> <span class="n">volume_bounces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">volume_bounces</span> <span class="o">=</span> <span class="n">volume_bounces</span></div>



<div class="viewcode-block" id="set_cpu_threads">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_cpu_threads">[docs]</a>
<span class="k">def</span> <span class="nf">set_cpu_threads</span><span class="p">(</span><span class="n">num_threads</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Sets the number of CPU cores to use simultaneously while rendering.</span>

<span class="sd">    :param num_threads: The number of threads to use. If 0 is given the number is automatically detected based</span>
<span class="sd">                        on the cpu cores.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If set to 0, use number of cores (default)</span>
    <span class="k">if</span> <span class="n">num_threads</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">threads_mode</span> <span class="o">=</span> <span class="s2">&quot;FIXED&quot;</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">threads</span> <span class="o">=</span> <span class="n">num_threads</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">threads_mode</span> <span class="o">=</span> <span class="s2">&quot;AUTO&quot;</span></div>



<div class="viewcode-block" id="toggle_stereo">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.toggle_stereo">[docs]</a>
<span class="k">def</span> <span class="nf">toggle_stereo</span><span class="p">(</span><span class="n">enable</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables/Disables stereoscopy.</span>

<span class="sd">    :param enable: True, if stereoscopy should be enabled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_multiview</span> <span class="o">=</span> <span class="n">enable</span>
    <span class="k">if</span> <span class="n">enable</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">views_format</span> <span class="o">=</span> <span class="s2">&quot;STEREO_3D&quot;</span></div>


<div class="viewcode-block" id="toggle_light_tree">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.toggle_light_tree">[docs]</a>
<span class="k">def</span> <span class="nf">toggle_light_tree</span><span class="p">(</span><span class="n">enable</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables/Disables blender&#39;s light tree for rendering.</span>

<span class="sd">    Enabling the light tree reduces the noise in scenes with many point lights,</span>
<span class="sd">    however it increases the render time per sample.</span>
<span class="sd">    See https://wiki.blender.org/wiki/Reference/Release_Notes/3.5/Cycles</span>

<span class="sd">    :param enable: True, if light tree should be enabled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">use_light_tree</span> <span class="o">=</span> <span class="n">enable</span></div>


<div class="viewcode-block" id="set_simplify_subdivision_render">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_simplify_subdivision_render">[docs]</a>
<span class="k">def</span> <span class="nf">set_simplify_subdivision_render</span><span class="p">(</span><span class="n">simplify_subdivision_render</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Sets global maximum subdivision level during rendering to speedup rendering.</span>

<span class="sd">    :param simplify_subdivision_render: The maximum subdivision level. If 0 is given, simplification of scene</span>
<span class="sd">                                        is disabled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">simplify_subdivision_render</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_simplify</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">simplify_subdivision_render</span> <span class="o">=</span> <span class="n">simplify_subdivision_render</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_simplify</span> <span class="o">=</span> <span class="kc">False</span></div>



<div class="viewcode-block" id="set_noise_threshold">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_noise_threshold">[docs]</a>
<span class="k">def</span> <span class="nf">set_noise_threshold</span><span class="p">(</span><span class="n">noise_threshold</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Configures the adaptive sampling, the noise threshold is typically between 0.1 and 0.001.</span>
<span class="sd">    Adaptive sampling automatically decreases the number of samples per pixel based on estimated level of noise.</span>

<span class="sd">    We do not recommend setting the noise threshold value to zero and therefore turning off the adaptive sampling.</span>

<span class="sd">    For more information see the official documentation:</span>
<span class="sd">    https://docs.blender.org/manual/en/latest/render/cycles/render_settings/sampling.html#adaptive-sampling</span>

<span class="sd">    :param noise_threshold: Noise level to stop sampling at. If 0 is given, adaptive sampling is disabled and only the</span>
<span class="sd">                            max amount of samples is used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">noise_threshold</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">use_adaptive_sampling</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">adaptive_threshold</span> <span class="o">=</span> <span class="n">noise_threshold</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">use_adaptive_sampling</span> <span class="o">=</span> <span class="kc">False</span></div>



<div class="viewcode-block" id="set_max_amount_of_samples">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_max_amount_of_samples">[docs]</a>
<span class="k">def</span> <span class="nf">set_max_amount_of_samples</span><span class="p">(</span><span class="n">samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Sets the maximum number of samples to render for each pixel.</span>
<span class="sd">    This maximum amount is usually not reached if the noise threshold is low enough.</span>
<span class="sd">    If the noise threshold was set to 0, then only the maximum number of samples is used (We do not recommend this).</span>

<span class="sd">    :param samples: The maximum number of samples per pixel</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">samples</span> <span class="o">=</span> <span class="n">samples</span></div>



<div class="viewcode-block" id="enable_distance_output">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.enable_distance_output">[docs]</a>
<span class="k">def</span> <span class="nf">enable_distance_output</span><span class="p">(</span><span class="n">activate_antialiasing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">file_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;distance_&quot;</span><span class="p">,</span>
                           <span class="n">output_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="n">antialiasing_distance_max</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">convert_to_depth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables writing distance images.</span>


<span class="sd">    :param activate_antialiasing: If this is True the final image will be anti-aliased</span>
<span class="sd">    :param output_dir: The directory to write files to, if this is None the temporary directory is used.</span>
<span class="sd">    :param file_prefix: The prefix to use for writing the files.</span>
<span class="sd">    :param output_key: The key to use for registering the distance output.</span>
<span class="sd">    :param antialiasing_distance_max: Max distance in which the distance is measured. Resolution decreases</span>
<span class="sd">                                      antiproportionally. Only if activate_antialiasing is True.</span>
<span class="sd">    :param convert_to_depth: If this is true, while loading a postprocessing step is executed to convert this distance</span>
<span class="sd">                             image to a depth image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">activate_antialiasing</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">enable_depth_output</span><span class="p">(</span><span class="n">activate_antialiasing</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">,</span> <span class="n">output_key</span><span class="p">,</span> <span class="n">convert_to_distance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">output_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_temporary_directory</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">antialiasing_distance_max</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">antialiasing_distance_max</span> <span class="o">=</span> <span class="n">DefaultConfig</span><span class="o">.</span><span class="n">antialiasing_distance_max</span>

    <span class="k">if</span> <span class="n">GlobalStorage</span><span class="o">.</span><span class="n">is_in_storage</span><span class="p">(</span><span class="s2">&quot;distance_output_is_enabled&quot;</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;The distance enable function can not be called twice. Either you called it twice or you used the &quot;</span> \
              <span class="s2">&quot;enable_depth_output with activate_antialiasing=True, which internally calls this function. This is &quot;</span> \
              <span class="s2">&quot;currently not supported, but there is an easy way to solve this, you can use the &quot;</span> \
              <span class="s2">&quot;bproc.postprocessing.dist2depth and depth2dist function on the output of the renderer and generate &quot;</span> \
              <span class="s2">&quot;the antialiased depth image yourself.&quot;</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">GlobalStorage</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;distance_output_is_enabled&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_compositing</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">GlobalStorage</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;renderer_distance_end&quot;</span><span class="p">,</span> <span class="n">antialiasing_distance_max</span><span class="p">)</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">links</span>
    <span class="c1"># Use existing render layer</span>
    <span class="n">render_layer_node</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_the_one_node_with_type</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="s1">&#39;CompositorNodeRLayers&#39;</span><span class="p">)</span>

    <span class="c1"># Set mist pass limits</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">mist_settings</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">mist_settings</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="n">antialiasing_distance_max</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">mist_settings</span><span class="o">.</span><span class="n">falloff</span> <span class="o">=</span> <span class="s2">&quot;LINEAR&quot;</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">view_layer</span><span class="o">.</span><span class="n">use_pass_mist</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Enable distance pass</span>
    <span class="c1"># Create a mapper node to map from 0-1 to SI units</span>
    <span class="n">mapper_node</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeMapRange&quot;</span><span class="p">)</span>
    <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">render_layer_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Mist&quot;</span><span class="p">],</span> <span class="n">mapper_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Value&#39;</span><span class="p">])</span>
    <span class="c1"># map the values 0-1 to range distance_start to distance_range</span>
    <span class="n">mapper_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;From Max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">mapper_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;To Min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">mapper_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;To Max&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="n">antialiasing_distance_max</span>
    <span class="n">final_output</span> <span class="o">=</span> <span class="n">mapper_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;Value&#39;</span><span class="p">]</span>

    <span class="c1"># Build output node</span>
    <span class="n">output_file</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeOutputFile&quot;</span><span class="p">)</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">output_dir</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">file_format</span> <span class="o">=</span> <span class="s2">&quot;OPEN_EXR&quot;</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">file_slots</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">file_prefix</span>

    <span class="c1"># Feed the Z-Buffer or Mist output of the render layer to the input of the file IO layer</span>
    <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">final_output</span><span class="p">,</span> <span class="n">output_file</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">])</span>

    <span class="n">Utility</span><span class="o">.</span><span class="n">add_output_entry</span><span class="p">({</span>
        <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">output_key</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%04d</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;.exr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;trim_redundant_channels&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;convert_to_depth&quot;</span><span class="p">:</span> <span class="n">convert_to_depth</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="kc">None</span></div>



<div class="viewcode-block" id="enable_depth_output">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.enable_depth_output">[docs]</a>
<span class="k">def</span> <span class="nf">enable_depth_output</span><span class="p">(</span><span class="n">activate_antialiasing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;depth_&quot;</span><span class="p">,</span>
                        <span class="n">output_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="n">antialiasing_distance_max</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">convert_to_distance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables writing depth images.</span>

<span class="sd">    Depth images will be written in the form of .exr files during the next rendering.</span>

<span class="sd">    :param activate_antialiasing: If this is True the final image will be antialiased</span>
<span class="sd">    :param output_dir: The directory to write files to, if this is None the temporary directory is used.</span>
<span class="sd">    :param file_prefix: The prefix to use for writing the files.</span>
<span class="sd">    :param output_key: The key to use for registering the depth output.</span>
<span class="sd">    :param antialiasing_distance_max: Max distance in which the distance is measured. \</span>
<span class="sd">                                      Only if activate_antialiasing is True.</span>
<span class="sd">    :param convert_to_distance: If this is true, while loading a postprocessing step is executed to convert this depth \</span>
<span class="sd">                                image to a distance image</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">activate_antialiasing</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">enable_distance_output</span><span class="p">(</span><span class="n">activate_antialiasing</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">,</span> <span class="n">output_key</span><span class="p">,</span>
                                      <span class="n">antialiasing_distance_max</span><span class="p">,</span> <span class="n">convert_to_depth</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">output_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_temporary_directory</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">GlobalStorage</span><span class="o">.</span><span class="n">is_in_storage</span><span class="p">(</span><span class="s2">&quot;depth_output_is_enabled&quot;</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;The depth enable function can not be called twice. Either you called it twice or you used the &quot;</span> \
              <span class="s2">&quot;enable_distance_output with activate_antialiasing=False, which internally calls this function. This &quot;</span> \
              <span class="s2">&quot;is currently not supported, but there is an easy way to solve this, you can use the &quot;</span> \
              <span class="s2">&quot;bproc.postprocessing.dist2depth and depth2dist function on the output of the renderer and generate &quot;</span> \
              <span class="s2">&quot;the antialiased distance image yourself.&quot;</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">GlobalStorage</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;depth_output_is_enabled&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_compositing</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">links</span>
    <span class="c1"># Use existing render layer</span>
    <span class="n">render_layer_node</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_the_one_node_with_type</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="s1">&#39;CompositorNodeRLayers&#39;</span><span class="p">)</span>

    <span class="c1"># Enable z-buffer pass</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">view_layer</span><span class="o">.</span><span class="n">use_pass_z</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Build output node</span>
    <span class="n">output_file</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeOutputFile&quot;</span><span class="p">)</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">output_dir</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">file_format</span> <span class="o">=</span> <span class="s2">&quot;OPEN_EXR&quot;</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">file_slots</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">file_prefix</span>

    <span class="c1"># Feed the Z-Buffer output of the render layer to the input of the file IO layer</span>
    <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">render_layer_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Depth&quot;</span><span class="p">],</span> <span class="n">output_file</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">])</span>

    <span class="n">Utility</span><span class="o">.</span><span class="n">add_output_entry</span><span class="p">({</span>
        <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">output_key</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%04d</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;.exr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;trim_redundant_channels&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;convert_to_distance&quot;</span><span class="p">:</span> <span class="n">convert_to_distance</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="kc">None</span></div>



<div class="viewcode-block" id="enable_normals_output">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.enable_normals_output">[docs]</a>
<span class="k">def</span> <span class="nf">enable_normals_output</span><span class="p">(</span><span class="n">output_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;normals_&quot;</span><span class="p">,</span>
                          <span class="n">output_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;normals&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables writing normal images.</span>

<span class="sd">    Normal images will be written in the form of .exr files during the next rendering.</span>

<span class="sd">    :param output_dir: The directory to write files to, if this is None the temporary directory is used.</span>
<span class="sd">    :param file_prefix: The prefix to use for writing the files.</span>
<span class="sd">    :param output_key: The key to use for registering the normal output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">output_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_temporary_directory</span><span class="p">()</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">view_layer</span><span class="o">.</span><span class="n">use_pass_normal</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_compositing</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">links</span>

    <span class="c1"># Use existing render layer</span>
    <span class="n">render_layer_node</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_the_one_node_with_type</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="s1">&#39;CompositorNodeRLayers&#39;</span><span class="p">)</span>

    <span class="n">separate_rgba</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeSepRGBA&quot;</span><span class="p">)</span>
    <span class="n">space_between_nodes_x</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="n">space_between_nodes_y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">300</span>
    <span class="n">separate_rgba</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">space_between_nodes_x</span>
    <span class="n">separate_rgba</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">space_between_nodes_y</span>
    <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">render_layer_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Normal&quot;</span><span class="p">],</span> <span class="n">separate_rgba</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">])</span>

    <span class="n">combine_rgba</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeCombRGBA&quot;</span><span class="p">)</span>
    <span class="n">combine_rgba</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">space_between_nodes_x</span> <span class="o">*</span> <span class="mi">14</span>

    <span class="n">c_channels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">]</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="n">space_between_nodes_x</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="n">multiplication_values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Node</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[],</span> <span class="p">[]]</span>
    <span class="n">channel_results</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">c_channels</span><span class="p">):</span>
        <span class="c1"># matrix multiplication</span>
        <span class="n">mulitpliers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">multiply</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeMath&quot;</span><span class="p">)</span>
            <span class="n">multiply</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="s2">&quot;MULTIPLY&quot;</span>
            <span class="n">multiply</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># setting at the end for all frames</span>
            <span class="n">multiply</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">column</span> <span class="o">*</span> <span class="n">space_between_nodes_x</span> <span class="o">+</span> <span class="n">offset</span>
            <span class="n">multiply</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">row_index</span> <span class="o">*</span> <span class="n">space_between_nodes_y</span>
            <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">separate_rgba</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="n">c_channels</span><span class="p">[</span><span class="n">column</span><span class="p">]],</span> <span class="n">multiply</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">mulitpliers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">multiply</span><span class="p">)</span>
            <span class="n">multiplication_values</span><span class="p">[</span><span class="n">row_index</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">multiply</span><span class="p">)</span>

        <span class="n">first_add</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeMath&quot;</span><span class="p">)</span>
        <span class="n">first_add</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="s2">&quot;ADD&quot;</span>
        <span class="n">first_add</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">space_between_nodes_x</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">+</span> <span class="n">offset</span>
        <span class="n">first_add</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">row_index</span> <span class="o">*</span> <span class="n">space_between_nodes_y</span>
        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">mulitpliers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span> <span class="n">first_add</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">mulitpliers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span> <span class="n">first_add</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">second_add</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeMath&quot;</span><span class="p">)</span>
        <span class="n">second_add</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="s2">&quot;ADD&quot;</span>
        <span class="n">second_add</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">space_between_nodes_x</span> <span class="o">*</span> <span class="mi">6</span> <span class="o">+</span> <span class="n">offset</span>
        <span class="n">second_add</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">row_index</span> <span class="o">*</span> <span class="n">space_between_nodes_y</span>
        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">first_add</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span> <span class="n">second_add</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">mulitpliers</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span> <span class="n">second_add</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">channel_results</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span> <span class="o">=</span> <span class="n">second_add</span>

    <span class="c1"># set the matrix accordingly</span>
    <span class="n">rot_around_x_axis</span> <span class="o">=</span> <span class="n">mathutils</span><span class="o">.</span><span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mf">90.0</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_start</span><span class="p">,</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_end</span><span class="p">):</span>
        <span class="n">used_rotation_matrix</span> <span class="o">=</span> <span class="n">CameraUtility</span><span class="o">.</span><span class="n">get_camera_pose</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span> <span class="o">@</span> <span class="n">rot_around_x_axis</span>
        <span class="k">for</span> <span class="n">row_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">column_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">current_multiply</span> <span class="o">=</span> <span class="n">multiplication_values</span><span class="p">[</span><span class="n">row_index</span><span class="p">][</span><span class="n">column_index</span><span class="p">]</span>
                <span class="n">current_multiply</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="n">used_rotation_matrix</span><span class="p">[</span><span class="n">column_index</span><span class="p">][</span><span class="n">row_index</span><span class="p">]</span>
                <span class="n">current_multiply</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">keyframe_insert</span><span class="p">(</span><span class="n">data_path</span><span class="o">=</span><span class="s1">&#39;default_value&#39;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">frame</span><span class="p">)</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">space_between_nodes_x</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">c_channels</span><span class="p">):</span>
        <span class="n">multiply</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeMath&quot;</span><span class="p">)</span>
        <span class="n">multiply</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="s2">&quot;MULTIPLY&quot;</span>
        <span class="n">multiply</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">space_between_nodes_x</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">offset</span>
        <span class="n">multiply</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">index</span> <span class="o">*</span> <span class="n">space_between_nodes_y</span>
        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">channel_results</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span> <span class="n">multiply</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="o">==</span> <span class="s2">&quot;G&quot;</span><span class="p">:</span>
            <span class="n">multiply</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">multiply</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="n">add</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeMath&quot;</span><span class="p">)</span>
        <span class="n">add</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="s2">&quot;ADD&quot;</span>
        <span class="n">add</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">space_between_nodes_x</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">offset</span>
        <span class="n">add</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">index</span> <span class="o">*</span> <span class="n">space_between_nodes_y</span>
        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">multiply</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span> <span class="n">add</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">add</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="n">output_channel</span> <span class="o">=</span> <span class="n">channel</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="o">==</span> <span class="s2">&quot;G&quot;</span><span class="p">:</span>
            <span class="n">output_channel</span> <span class="o">=</span> <span class="s2">&quot;B&quot;</span>
        <span class="k">elif</span> <span class="n">channel</span> <span class="o">==</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span>
            <span class="n">output_channel</span> <span class="o">=</span> <span class="s2">&quot;G&quot;</span>
        <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span> <span class="n">combine_rgba</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="n">output_channel</span><span class="p">])</span>

    <span class="n">output_file</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;CompositorNodeOutputFile&quot;</span><span class="p">)</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">output_dir</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">file_format</span> <span class="o">=</span> <span class="s2">&quot;OPEN_EXR&quot;</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">file_slots</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">file_prefix</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">space_between_nodes_x</span> <span class="o">*</span> <span class="mi">15</span>
    <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">combine_rgba</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">],</span> <span class="n">output_file</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">])</span>

    <span class="n">Utility</span><span class="o">.</span><span class="n">add_output_entry</span><span class="p">({</span>
        <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">output_key</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%04d</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;.exr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0.0&quot;</span>
    <span class="p">})</span></div>



<div class="viewcode-block" id="enable_segmentation_output">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.enable_segmentation_output">[docs]</a>
<span class="k">def</span> <span class="nf">enable_segmentation_output</span><span class="p">(</span><span class="n">map_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;category_id&quot;</span><span class="p">,</span>
                               <span class="n">default_values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                               <span class="n">pass_alpha_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span>
                               <span class="n">output_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                               <span class="n">file_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;segmap_&quot;</span><span class="p">,</span> <span class="n">output_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;segmap&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables segmentation output by certain keys.</span>

<span class="sd">    The key instances is used, if a mapping of every object in the scene to an integer is requested. These integers</span>
<span class="sd">    are assigned randomly and do not follow any system. They are consisted for one rendering call.</span>

<span class="sd">    By default, the custom property `category_id` is used. It has to be set for every visible object in the scene,</span>
<span class="sd">    including the background (world). One can provide a `default_value` for it to avoid errors: `{&quot;category_id&quot;: 0}`.</span>

<span class="sd">    Map by keys can be all custom properties or the attributes of an object such as `location` or `name`. If the value</span>
<span class="sd">    can not be stored in the image itself an instance image has to be generated. The output then will contain a</span>
<span class="sd">    dictionary mapping the instance ids to the attributes of the objects.</span>

<span class="sd">    :param map_by: Map by keys, either a single str or a list of str.</span>
<span class="sd">    :param default_values: A dictionary offering a default value for objects which do not provide a value</span>
<span class="sd">                           for a certain key</span>
<span class="sd">    :param pass_alpha_threshold: This alpha threshold is used to decide which object to use a low value means that an</span>
<span class="sd">                                 object has to be nearly completely transparent to be considered transparent, while</span>
<span class="sd">                                 materials such as frosted class with an alpha value of 0.5 would be considered opaque</span>
<span class="sd">    :param output_dir: The temporary output dir in which the resulting .exr images are saved</span>
<span class="sd">    :param file_prefix: The prefix to use for writing the files.</span>
<span class="sd">    :param output_key: The key to use for registering the segmentation output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># give all objects an id, background is always zero</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">get_all_blender_mesh_objects</span><span class="p">()):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">pass_index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># add the pass object index id to the rendering output</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_compositing</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">view_layers</span><span class="p">[</span><span class="s2">&quot;ViewLayer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">use_pass_object_index</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">links</span>

    <span class="n">render_layer_node</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Render Layers&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_temporary_directory</span><span class="p">()</span>

    <span class="n">output_node</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;CompositorNodeOutputFile&#39;</span><span class="p">)</span>
    <span class="n">output_node</span><span class="o">.</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">output_dir</span>
    <span class="n">output_node</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">file_format</span> <span class="o">=</span> <span class="s2">&quot;OPEN_EXR&quot;</span>
    <span class="n">output_node</span><span class="o">.</span><span class="n">file_slots</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">file_prefix</span>
    <span class="n">Utility</span><span class="o">.</span><span class="n">add_output_entry</span><span class="p">({</span>
        <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">output_key</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%04d</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;.exr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;3.0.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;trim_redundant_channels&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;is_semantic_segmentation&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;semantic_segmentation_mapping&quot;</span><span class="p">:</span> <span class="n">map_by</span><span class="p">,</span>
        <span class="s2">&quot;semantic_segmentation_default_values&quot;</span><span class="p">:</span> <span class="n">default_values</span>
    <span class="p">})</span>

    <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">render_layer_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;IndexOB&quot;</span><span class="p">],</span> <span class="n">output_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">])</span>

    <span class="c1"># set the threshold low to avoid noise in alpha materials</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">view_layers</span><span class="p">[</span><span class="s2">&quot;ViewLayer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pass_alpha_threshold</span> <span class="o">=</span> <span class="n">pass_alpha_threshold</span></div>



<div class="viewcode-block" id="enable_diffuse_color_output">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.enable_diffuse_color_output">[docs]</a>
<span class="k">def</span> <span class="nf">enable_diffuse_color_output</span><span class="p">(</span><span class="n">output_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;diffuse_&quot;</span><span class="p">,</span>
                                <span class="n">output_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;diffuse&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables writing diffuse color (albedo) images.</span>

<span class="sd">    Diffuse color images will be written in the form of .png files during the next rendering.</span>

<span class="sd">    :param output_dir: The directory to write files to, if this is None the temporary directory is used.</span>
<span class="sd">    :param file_prefix: The prefix to use for writing the files.</span>
<span class="sd">    :param output_key: The key to use for registering the diffuse color output.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">output_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_temporary_directory</span><span class="p">()</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_compositing</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">links</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">view_layer</span><span class="o">.</span><span class="n">use_pass_diffuse_color</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">render_layer_node</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_the_one_node_with_type</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="s1">&#39;CompositorNodeRLayers&#39;</span><span class="p">)</span>
    <span class="n">final_output</span> <span class="o">=</span> <span class="n">render_layer_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;DiffCol&quot;</span><span class="p">]</span>

    <span class="n">output_file</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;CompositorNodeOutputFile&#39;</span><span class="p">)</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">output_dir</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">file_format</span> <span class="o">=</span> <span class="s2">&quot;PNG&quot;</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">file_slots</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">file_prefix</span>
    <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">final_output</span><span class="p">,</span> <span class="n">output_file</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">])</span>

    <span class="n">Utility</span><span class="o">.</span><span class="n">add_output_entry</span><span class="p">({</span>
        <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">output_key</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%04d</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0.0&quot;</span>
    <span class="p">})</span></div>



<div class="viewcode-block" id="map_file_format_to_file_ending">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.map_file_format_to_file_ending">[docs]</a>
<span class="k">def</span> <span class="nf">map_file_format_to_file_ending</span><span class="p">(</span><span class="n">file_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Returns the files endings for a given blender output format.</span>

<span class="sd">    :param file_format: The blender file format.</span>
<span class="sd">    :return: The file ending.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">file_format</span> <span class="o">==</span> <span class="s1">&#39;PNG&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;.png&quot;</span>
    <span class="k">if</span> <span class="n">file_format</span> <span class="o">==</span> <span class="s1">&#39;JPEG&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;.jpg&quot;</span>
    <span class="k">if</span> <span class="n">file_format</span> <span class="o">==</span> <span class="s1">&#39;OPEN_EXR&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;.exr&quot;</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown Image Type </span><span class="si">{</span><span class="n">file_format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="_progress_bar_thread">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility._progress_bar_thread">[docs]</a>
<span class="k">def</span> <span class="nf">_progress_bar_thread</span><span class="p">(</span><span class="n">pipe_out</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">stdout</span><span class="p">:</span> <span class="n">IO</span><span class="p">,</span> <span class="n">total_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; The thread rendering the progress bar</span>

<span class="sd">    :param pipe_out: The pipe output delivering blenders debug messages.</span>
<span class="sd">    :param stdout: The stdout to which the progress bar should be written.</span>
<span class="sd">    :param total_frames: The number of frames that should be rendered.</span>
<span class="sd">    :param num_samples: The number of samples used to render each frame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Define columns for progress bar</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">TextColumn</span><span class="p">(</span><span class="s2">&quot;[progress.description]</span><span class="si">{task.description}</span><span class="s2">&quot;</span><span class="p">),</span>
        <span class="n">BarColumn</span><span class="p">(),</span>
        <span class="n">TimeRemainingColumn</span><span class="p">(),</span>
        <span class="n">TextColumn</span><span class="p">(</span><span class="s2">&quot;[progress.description]</span><span class="si">{task.fields[status]}</span><span class="s2">&quot;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="c1"># Initializes progress bar using given stdout</span>
    <span class="k">with</span> <span class="n">Progress</span><span class="p">(</span><span class="o">*</span><span class="n">columns</span><span class="p">,</span> <span class="n">console</span><span class="o">=</span><span class="n">Console</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">stdout</span><span class="p">),</span> <span class="n">transient</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">progress</span><span class="p">:</span>
        <span class="n">complete_task</span> <span class="o">=</span> <span class="n">progress</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="s2">&quot;[green]Total&quot;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">total_frames</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">frame_task</span> <span class="o">=</span> <span class="n">progress</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="s2">&quot;[yellow]Current frame&quot;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">num_samples</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Continuously read blenders debug messages</span>
        <span class="n">current_line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">starting_frame_number</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_start</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># Read the next character</span>
            <span class="n">char</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">pipe_out</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">char</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">char</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># If its the ending character, stop</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span> <span class="ow">or</span> <span class="s2">&quot;</span><span class="se">\b</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="n">char</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="c1"># If the current line has ended</span>
            <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">:</span>
                <span class="c1"># Check if its a line we can use (starts with &quot;Fra:&quot;)</span>
                <span class="k">if</span> <span class="n">current_line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Fra:&quot;</span><span class="p">):</span>
                    <span class="c1"># Extract current frame number and use it to set the progress bar</span>
                    <span class="n">frame_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">current_line</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Fra:&quot;</span><span class="p">):])</span>
                    <span class="n">frames_completed</span> <span class="o">=</span> <span class="n">frame_number</span> <span class="o">-</span> <span class="n">starting_frame_number</span>
                    <span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">complete_task</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="n">frames_completed</span><span class="p">)</span>
                    <span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">complete_task</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Rendering frame </span><span class="si">{</span><span class="n">frames_completed</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> of </span><span class="si">{</span><span class="n">total_frames</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="c1"># Split line into columns</span>
                    <span class="n">status_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">current_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)]</span>
                    <span class="k">if</span> <span class="s2">&quot;Scene, ViewLayer&quot;</span> <span class="ow">in</span> <span class="n">status_columns</span><span class="p">:</span>
                        <span class="c1"># If we are currently at &quot;Scene, ViewLayer&quot;, use everything afterwards</span>
                        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_columns</span><span class="p">[</span><span class="n">status_columns</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;Scene, ViewLayer&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:])</span>
                        <span class="c1"># If we are currently rendering, update the progress</span>
                        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Sample&quot;</span><span class="p">):</span>
                            <span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">frame_task</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">status</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Sample&quot;</span><span class="p">):]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="k">elif</span> <span class="s2">&quot;Compositing&quot;</span> <span class="ow">in</span> <span class="n">status_columns</span><span class="p">:</span>
                        <span class="c1"># If we are at &quot;Compositing&quot;, use everything afterwards including &quot;Compositing&quot;</span>
                        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_columns</span><span class="p">[</span><span class="n">status_columns</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;Compositing&quot;</span><span class="p">):])</span>
                        <span class="c1"># Set render progress to complete</span>
                        <span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">frame_task</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="n">num_samples</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># In every other case, use last column</span>
                        <span class="n">status</span> <span class="o">=</span> <span class="n">status_columns</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="c1"># Set status to progress bar</span>
                    <span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">frame_task</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
                <span class="c1"># Start with next line</span>
                <span class="n">current_line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Append char to current line</span>
                <span class="n">current_line</span> <span class="o">+=</span> <span class="n">char</span></div>



<div class="viewcode-block" id="_render_progress_bar">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility._render_progress_bar">[docs]</a>
<span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">_render_progress_bar</span><span class="p">(</span><span class="n">pipe_out</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">pipe_in</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">stdout</span><span class="p">:</span> <span class="n">IO</span><span class="p">,</span> <span class="n">total_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Shows a progress bar visualizing the render progress.</span>

<span class="sd">    :param pipe_out: The pipe output delivering blenders debug messages.</span>
<span class="sd">    :param pipe_in: The input of the pipe, necessary to send the end character.</span>
<span class="sd">    :param stdout: The stdout to which the progress bar should be written.</span>
<span class="sd">    :param total_frames: The number of frames that should be rendered.</span>
<span class="sd">    :param enabled: If False, no progress bar is shown.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">enabled</span><span class="p">:</span>
        <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_progress_bar_thread</span><span class="p">,</span>
                                  <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">pipe_out</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">total_frames</span><span class="p">,</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">samples</span><span class="p">))</span>
        <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Send final character, so the thread knows to stop</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fdopen</span><span class="p">(</span><span class="n">pipe_in</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\b</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">w</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">yield</span></div>



<div class="viewcode-block" id="render">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.render">[docs]</a>
<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">output_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;rgb_&quot;</span><span class="p">,</span> <span class="n">output_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;colors&quot;</span><span class="p">,</span>
           <span class="n">load_keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">return_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
           <span class="n">keys_with_alpha_channel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
           <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Render all frames.</span>

<span class="sd">    This will go through all frames from scene.frame_start to scene.frame_end and render each of them.</span>

<span class="sd">    :param output_dir: The directory to write files to, if this is None the temporary directory is used. \</span>
<span class="sd">                       The temporary directory is usually in the shared memory (only true for linux).</span>
<span class="sd">    :param file_prefix: The prefix to use for writing the images.</span>
<span class="sd">    :param output_key: The key to use for registering the output.</span>
<span class="sd">    :param load_keys: Set of output keys to load when available</span>
<span class="sd">    :param return_data: Whether to load and return generated data.</span>
<span class="sd">    :param keys_with_alpha_channel: A set containing all keys whose alpha channels should be loaded.</span>
<span class="sd">    :param verbose: If True, more details about the rendering process are printed.</span>
<span class="sd">    :return: dict of lists of raw renderer output. Keys can be &#39;distance&#39;, &#39;colors&#39;, &#39;normals&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">output_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_temporary_directory</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">load_keys</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">load_keys</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;colors&#39;</span><span class="p">,</span> <span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="s1">&#39;normals&#39;</span><span class="p">,</span> <span class="s1">&#39;diffuse&#39;</span><span class="p">,</span> <span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="s1">&#39;segmap&#39;</span><span class="p">}</span>
        <span class="n">keys_with_alpha_channel</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;colors&#39;</span><span class="p">}</span> <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">film_transparent</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">output_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">Utility</span><span class="o">.</span><span class="n">add_output_entry</span><span class="p">({</span>
            <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">output_key</span><span class="p">,</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">%04d</span><span class="s2">&quot;</span> <span class="o">+</span>
                    <span class="n">map_file_format_to_file_ending</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">image_settings</span><span class="o">.</span><span class="n">file_format</span><span class="p">),</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0.0&quot;</span>
        <span class="p">})</span>
        <span class="n">load_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">output_key</span><span class="p">)</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">)</span>

    <span class="c1"># Skip if there is nothing to render</span>
    <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_end</span> <span class="o">!=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_start</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">get_all_blender_mesh_objects</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;There are no mesh-objects to render, &quot;</span>
                            <span class="s2">&quot;please load an object before invoking the renderer.&quot;</span><span class="p">)</span>
        <span class="c1"># Print what is rendered</span>
        <span class="n">total_frames</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_end</span> <span class="o">-</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_start</span>
        <span class="k">if</span> <span class="n">load_keys</span><span class="p">:</span>
            <span class="n">registered_output_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">output</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_registered_outputs</span><span class="p">()]</span>
            <span class="n">keys_to_render</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">load_keys</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">registered_output_keys</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rendering </span><span class="si">{</span><span class="n">total_frames</span><span class="si">}</span><span class="s2"> frames of </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">keys_to_render</span><span class="p">)</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

        <span class="c1"># As frame_end is pointing to the next free frame, decrease it by one, as</span>
        <span class="c1"># blender will render all frames in [frame_start, frame_ned]</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_end</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="c1"># Define pipe to communicate blenders debug messages to progress bar</span>
        <span class="n">pipe_out</span><span class="p">,</span> <span class="n">pipe_in</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">pipe</span><span class="p">()</span>
        <span class="n">begin</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">stdout_redirected</span><span class="p">(</span><span class="n">pipe_in</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="ow">not</span> <span class="n">verbose</span><span class="p">)</span> <span class="k">as</span> <span class="n">stdout</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">_render_progress_bar</span><span class="p">(</span><span class="n">pipe_out</span><span class="p">,</span> <span class="n">pipe_in</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">total_frames</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="ow">not</span> <span class="n">verbose</span><span class="p">):</span>
                <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">animation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">write_still</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Close Pipes to prevent having unclosed file handles</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">pipe_out</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">pipe_in</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finished rendering after </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">begin</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
        <span class="c1"># Revert changes</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">frame_end</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No camera poses have been registered, therefore nothing can be rendered. A camera &quot;</span>
                           <span class="s2">&quot;pose can be registered via bproc.camera.add_camera_pose().&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_WriterUtility</span><span class="o">.</span><span class="n">load_registered_outputs</span><span class="p">(</span><span class="n">load_keys</span><span class="p">,</span> <span class="n">keys_with_alpha_channel</span><span class="p">)</span> <span class="k">if</span> <span class="n">return_data</span> <span class="k">else</span> <span class="p">{}</span></div>



<div class="viewcode-block" id="set_output_format">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_output_format">[docs]</a>
<span class="k">def</span> <span class="nf">set_output_format</span><span class="p">(</span><span class="n">file_format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">color_depth</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">enable_transparency</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">jpg_quality</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Sets the output format to use for rendering. Default values defined in DefaultConfig.py.</span>

<span class="sd">    :param file_format: The file format to use, e.q. &quot;PNG&quot;, &quot;JPEG&quot; or &quot;OPEN_EXR&quot;.</span>
<span class="sd">    :param color_depth: The color depth.</span>
<span class="sd">    :param enable_transparency: If true, the output will contain a alpha channel and the background will be</span>
<span class="sd">                                set transparent.</span>
<span class="sd">    :param jpg_quality: The quality to use, if file format is set to &quot;JPEG&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">enable_transparency</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># In case a previous renderer changed these settings</span>
        <span class="c1"># Store as RGB by default unless the user specifies store_alpha as true in yaml</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">image_settings</span><span class="o">.</span><span class="n">color_mode</span> <span class="o">=</span> <span class="s2">&quot;RGBA&quot;</span> <span class="k">if</span> <span class="n">enable_transparency</span> <span class="k">else</span> <span class="s2">&quot;RGB&quot;</span>
        <span class="c1"># set the background as transparent if transparent_background is true in yaml</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">film_transparent</span> <span class="o">=</span> <span class="n">enable_transparency</span>
    <span class="k">if</span> <span class="n">file_format</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">image_settings</span><span class="o">.</span><span class="n">file_format</span> <span class="o">=</span> <span class="n">file_format</span>
    <span class="k">if</span> <span class="n">color_depth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">image_settings</span><span class="o">.</span><span class="n">color_depth</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">color_depth</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">jpg_quality</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># only influences jpg quality</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">image_settings</span><span class="o">.</span><span class="n">quality</span> <span class="o">=</span> <span class="n">jpg_quality</span></div>



<div class="viewcode-block" id="enable_motion_blur">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.enable_motion_blur">[docs]</a>
<span class="k">def</span> <span class="nf">enable_motion_blur</span><span class="p">(</span><span class="n">motion_blur_length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rolling_shutter_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;NONE&quot;</span><span class="p">,</span>
                       <span class="n">rolling_shutter_length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables motion blur and sets rolling shutter.</span>

<span class="sd">    :param motion_blur_length: Time taken in frames between shutter open and close.</span>
<span class="sd">    :param rolling_shutter_type: Type of rolling shutter effect. If &quot;NONE&quot;, rolling shutter is disabled.</span>
<span class="sd">    :param rolling_shutter_length: Scanline &quot;exposure&quot; time for the rolling shutter effect.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_motion_blur</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">motion_blur_shutter</span> <span class="o">=</span> <span class="n">motion_blur_length</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">rolling_shutter_type</span> <span class="o">=</span> <span class="n">rolling_shutter_type</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">rolling_shutter_duration</span> <span class="o">=</span> <span class="n">rolling_shutter_length</span></div>



<div class="viewcode-block" id="render_init">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.render_init">[docs]</a>
<span class="k">def</span> <span class="nf">render_init</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Initializes the renderer.</span>

<span class="sd">    This enables the cycles renderer and sets some options to speedup rendering.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">resolution_percentage</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="c1"># Lightning settings to reduce training time</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">engine</span> <span class="o">=</span> <span class="s1">&#39;CYCLES&#39;</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">debug_bvh_type</span> <span class="o">=</span> <span class="s2">&quot;STATIC_BVH&quot;</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">debug_use_spatial_splits</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1"># Setting use_persistent_data to True makes the rendering getting slower and slower (probably a blender bug)</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">use_persistent_data</span> <span class="o">=</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="disable_all_denoiser">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.disable_all_denoiser">[docs]</a>
<span class="k">def</span> <span class="nf">disable_all_denoiser</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Disables all denoiser.</span>

<span class="sd">    At the moment this includes the cycles and the intel denoiser.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Disable cycles denoiser</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">view_layer</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">use_denoising</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">use_denoising</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># Disable intel denoiser</span>
    <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">use_nodes</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">nodes</span>
        <span class="n">links</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">links</span>

        <span class="c1"># Go through all existing denoiser nodes</span>
        <span class="k">for</span> <span class="n">denoiser_node</span> <span class="ow">in</span> <span class="n">Utility</span><span class="o">.</span><span class="n">get_nodes_with_type</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="s1">&#39;CompositorNodeDenoise&#39;</span><span class="p">):</span>
            <span class="n">in_node</span> <span class="o">=</span> <span class="n">denoiser_node</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">]</span>
            <span class="n">out_node</span> <span class="o">=</span> <span class="n">denoiser_node</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;Image&#39;</span><span class="p">]</span>

            <span class="c1"># If it is fully included into the node tree</span>
            <span class="k">if</span> <span class="n">in_node</span><span class="o">.</span><span class="n">is_linked</span> <span class="ow">and</span> <span class="n">out_node</span><span class="o">.</span><span class="n">is_linked</span><span class="p">:</span>
                <span class="c1"># There is always only one input link</span>
                <span class="n">in_link</span> <span class="o">=</span> <span class="n">in_node</span><span class="o">.</span><span class="n">links</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="c1"># Connect from_socket of the incoming link with all to_sockets of the out going links</span>
                <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">out_node</span><span class="o">.</span><span class="n">links</span><span class="p">:</span>
                    <span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">in_link</span><span class="o">.</span><span class="n">from_socket</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">to_socket</span><span class="p">)</span>

            <span class="c1"># Finally remove the denoiser node</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">denoiser_node</span><span class="p">)</span></div>



<div class="viewcode-block" id="set_world_background">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_world_background">[docs]</a>
<span class="k">def</span> <span class="nf">set_world_background</span><span class="p">(</span><span class="n">color</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">strength</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Sets the color of blenders world background</span>

<span class="sd">    :param color: A three-dimensional list specifying the new color in floats.</span>
<span class="sd">    :param strength: The strength of the emitted background light.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">world</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">world</span>
    <span class="n">world</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">nodes</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">links</span>

    <span class="c1"># Unlink any incoming link that would overwrite the default value</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">links</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">links</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">links</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">nodes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Strength&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="n">strength</span>
    <span class="n">nodes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Background&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="n">color</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>



<div class="viewcode-block" id="enable_experimental_features">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.enable_experimental_features">[docs]</a>
<span class="k">def</span> <span class="nf">enable_experimental_features</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Enables experimental cycles features. &quot;&quot;&quot;</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">feature_set</span> <span class="o">=</span> <span class="s1">&#39;EXPERIMENTAL&#39;</span></div>



<div class="viewcode-block" id="set_render_devices">
<a class="viewcode-back" href="../../../../blenderproc.python.renderer.RendererUtility.html#blenderproc.python.renderer.RendererUtility.set_render_devices">[docs]</a>
<span class="k">def</span> <span class="nf">set_render_devices</span><span class="p">(</span><span class="n">use_only_cpu</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">desired_gpu_device_type</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">desired_gpu_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Configures the devices to use for rendering.</span>

<span class="sd">    :param use_only_cpu: If True, only the cpu is used for rendering.</span>
<span class="sd">    :param desired_gpu_device_type: One or multiple GPU device types to consider. If multiple are given,</span>
<span class="sd">                                    the first available is used. Possible choices are [&quot;OPTIX&quot;, &quot;CUDA&quot;,</span>
<span class="sd">                                    &quot;METAL&quot;, &quot;HIP&quot;]. Default is [&quot;OPTIX&quot;, &quot;CUDA&quot;, &quot;HIP&quot;] on linux/windows and</span>
<span class="sd">                                    [&quot;METAL&quot;] on supported Mac devices.</span>
<span class="sd">    :param desired_gpu_ids: One or multiple GPU ids to specifically use. If none is given, all suitable GPUs are used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Mark beginning of selection to avoid confusion when calling set_render_devices multiple times:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Selecting render devices...&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">desired_gpu_device_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># If no gpu types are specified, use the default types based on the OS</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;darwin&quot;</span><span class="p">:</span>
            <span class="n">mac_version</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">mac_ver</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">mac_version_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">ele</span><span class="p">)</span> <span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">mac_version</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)]</span>
            <span class="c1"># On recent macs, use METAL, otherwise use cpu only</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">mac_version_numbers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">12</span> <span class="ow">and</span> <span class="n">mac_version_numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">)</span> <span class="ow">or</span> <span class="n">mac_version_numbers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">:</span>
                <span class="n">desired_gpu_device_type</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;METAL&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">desired_gpu_device_type</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Define default for linux and windows</span>
            <span class="n">desired_gpu_device_type</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;OPTIX&quot;</span><span class="p">,</span> <span class="s2">&quot;CUDA&quot;</span><span class="p">,</span> <span class="s2">&quot;HIP&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">desired_gpu_device_type</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="c1"># Make sure it&#39;s a list</span>
        <span class="n">desired_gpu_device_type</span> <span class="o">=</span> <span class="p">[</span><span class="n">desired_gpu_device_type</span><span class="p">]</span>

    <span class="c1"># Make sure desired_gpu_device_type is a list</span>
    <span class="k">if</span> <span class="n">desired_gpu_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">desired_gpu_ids</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">desired_gpu_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">desired_gpu_ids</span><span class="p">]</span>

    <span class="c1"># Decide between gpu and cpu rendering</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_gpu_device_type</span> <span class="ow">or</span> <span class="n">use_only_cpu</span><span class="p">:</span>
        <span class="c1"># Use only CPU</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="s2">&quot;CPU&quot;</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">addons</span><span class="p">[</span><span class="s1">&#39;cycles&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">compute_device_type</span> <span class="o">=</span> <span class="s2">&quot;NONE&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using only the CPU for rendering&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Use GPU</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="s2">&quot;GPU&quot;</span>
        <span class="n">preferences</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">addons</span><span class="p">[</span><span class="s1">&#39;cycles&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">preferences</span>

        <span class="c1"># Go over all specified device types</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">device_type</span> <span class="ow">in</span> <span class="n">desired_gpu_device_type</span><span class="p">:</span>
            <span class="c1"># Check if there are devices that support that type</span>
            <span class="n">devices</span> <span class="o">=</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_devices_for_type</span><span class="p">(</span><span class="n">device_type</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">devices</span><span class="p">:</span>
                <span class="c1"># Set device type</span>
                <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">addons</span><span class="p">[</span><span class="s1">&#39;cycles&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">compute_device_type</span> <span class="o">=</span> <span class="n">device_type</span>
                <span class="c1"># Go over all devices with that type</span>
                <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">device</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">devices</span><span class="p">):</span>
                    <span class="c1"># Only use gpus with specified ids</span>
                    <span class="k">if</span> <span class="n">desired_gpu_ids</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">desired_gpu_ids</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Device </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> of type </span><span class="si">{</span><span class="n">device</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2"> found and used.&quot;</span><span class="p">)</span>
                        <span class="n">device</span><span class="o">.</span><span class="n">use</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">device</span><span class="o">.</span><span class="n">use</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The specified gpu ids lead to no selected gpu at all. Valid gpu ids are &quot;</span>
                                       <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">devices</span><span class="p">)))</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">break</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
            <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cycles</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="s2">&quot;CPU&quot;</span>
            <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">addons</span><span class="p">[</span><span class="s1">&#39;cycles&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">compute_device_type</span> <span class="o">=</span> <span class="s2">&quot;NONE&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using only the CPU for rendering&quot;</span><span class="p">)</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, DLR RMC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>