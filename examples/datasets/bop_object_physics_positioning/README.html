<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BOP with object pose sampling and physics positioning &mdash; BlenderProc 2.7.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme_overrides.css?v=034b4ec4" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=dfec817d"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            BlenderProc
          </a>
              <div class="version">
                2.7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../docs/tutorials/loader.html">Loading and manipulating objects</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../docs/tutorials/camera.html">Configuring the camera</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../docs/tutorials/renderer.html">Rendering the scene</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../docs/tutorials/writer.html">Writing the results to file</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../docs/tutorials/key_frames.html">How key frames work</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../docs/tutorials/physics.html">Positioning objects via the physics simulator</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../basics/README.html">Basics</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../basics/basic/README.html">basic</a></li>
<li class="toctree-l2"><a class="reference external" href="../../basics/camera_object_pose/README.html">camera_object_pose</a></li>
<li class="toctree-l2"><a class="reference external" href="../../basics/camera_sampling/README.html">camera_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="../../basics/entity_manipulation/README.html">entity_manipulation</a></li>
<li class="toctree-l2"><a class="reference external" href="../../basics/light_sampling/README.html">light_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="../../basics/material_manipulation/README.html">material_manipulation</a></li>
<li class="toctree-l2"><a class="reference external" href="../../basics/physics_positioning/README.html">physics_positioning</a></li>
<li class="toctree-l2"><a class="reference external" href="../../basics/semantic_segmentation/README.html">semantic_segmentation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../advanced/README.html">Advanced</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../advanced/auto_shading/README.html">auto_shading</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/calibration/README.html">calibration</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/camera_depth_of_field/README.html">camera_depth_of_field</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/camera_random_trajectories/README.html">camera_random_trajectories</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/coco_annotations/README.html">coco_annotations</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/diffuse_color_image/README.html">diffuse_color_image</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/dust/README.html">dust</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/entity_displacement_modifier/README.html">entity_displacement_modifier</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/gif_animation/README.html">gif_animation</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/kinect_azure_noise/README.html">kinect_azure_noise</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/lens_distortion/README.html">lens_distortion</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/material_randomizer/README.html">material_randomizer</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/motion_blur_rolling_shutter/README.html">motion_blur_rolling_shutter</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/multi_render/README.html">multi_render</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/nocs/README.html">nocs</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/object_pose_sampling/README.html">object_pose_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/on_surface_object_sampling/README.html">on_surface_object_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/optical_flow/README.html">optical_flow</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/physics_convex_decomposition/README.html">physics_convex_decomposition</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/point_clouds/README.html">point_clouds</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/random_backgrounds/README.html">random_backgrounds</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/random_room_constructor/README.html">random_room_constructor</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/spotlight/README.html">spotlight</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/stereo_matching/README.html">stereo_matching</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/stereo_matching_with_projector/README.html">stereo_matching_with_projector</a></li>
<li class="toctree-l2"><a class="reference external" href="../../advanced/urdf_loading_and_manipulation/README.html">urdf_loading_and_manipulation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 current"><a class="reference external" href="../README.html">Datasets</a><ul>
<li class="toctree-l2"><a class="reference external" href="../amass_human_poses/README.html">amass_human_poses</a></li>
<li class="toctree-l2"><a class="reference external" href="../blenderkit/README.html">blenderkit</a></li>
<li class="toctree-l2"><a class="reference external" href="../bop_challenge/README.html">bop_challenge</a></li>
<li class="toctree-l2"><a class="reference external" href="../bop_object_on_surface_sampling/README.html">bop_object_on_surface_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="#">bop_object_physics_positioning</a></li>
<li class="toctree-l2"><a class="reference external" href="../bop_object_pose_sampling/README.html">bop_object_pose_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="../bop_scene_replication/README.html">bop_scene_replication</a></li>
<li class="toctree-l2"><a class="reference external" href="../front_3d/README.html">front_3d</a></li>
<li class="toctree-l2"><a class="reference external" href="../front_3d_object_sampling/README.html">front_3d_object_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="../front_3d_with_improved_mat/README.html">front_3d_with_improved_mat</a></li>
<li class="toctree-l2"><a class="reference external" href="../haven/README.html">haven</a></li>
<li class="toctree-l2"><a class="reference external" href="../ikea/README.html">ikea</a></li>
<li class="toctree-l2"><a class="reference external" href="../matterport3d/README.html">matterport3d</a></li>
<li class="toctree-l2"><a class="reference external" href="../pix3d/README.html">pix3d</a></li>
<li class="toctree-l2"><a class="reference external" href="../replica/README.html">replica</a></li>
<li class="toctree-l2"><a class="reference external" href="../scenenet/README.html">scenenet</a></li>
<li class="toctree-l2"><a class="reference external" href="../scenenet_with_cctextures/README.html">scenenet_with_cctextures</a></li>
<li class="toctree-l2"><a class="reference external" href="../shapenet/README.html">shapenet</a></li>
<li class="toctree-l2"><a class="reference external" href="../shapenet_with_scenenet/README.html">shapenet_with_scenenet</a></li>
<li class="toctree-l2"><a class="reference external" href="../shapenet_with_suncg/README.html">shapenet_with_suncg</a></li>
<li class="toctree-l2"><a class="reference external" href="../suncg_basic/README.html">suncg_basic</a></li>
<li class="toctree-l2"><a class="reference external" href="../suncg_with_cam_sampling/README.html">suncg_with_cam_sampling</a></li>
<li class="toctree-l2"><a class="reference external" href="../suncg_with_improved_mat/README.html">suncg_with_improved_mat</a></li>
<li class="toctree-l2"><a class="reference external" href="../suncg_with_object_replacer/README.html">suncg_with_object_replacer</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Entities (bproc.types)</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.ArmatureUtility.html#blenderproc.python.types.ArmatureUtility.Armature">Armature</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.EntityUtility.html#blenderproc.python.types.EntityUtility.Entity">Entity</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.LightUtility.html#blenderproc.python.types.LightUtility.Light">Light</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.MaterialUtility.html#blenderproc.python.types.MaterialUtility.Material">Material</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.MeshObjectUtility.html#blenderproc.python.types.MeshObjectUtility.MeshObject">MeshObject</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.StructUtility.html#blenderproc.python.types.StructUtility.Struct">Struct</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.URDFUtility.html#blenderproc.python.types.URDFUtility.URDFObject">URDFObject</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.InertialUtility.html#blenderproc.python.types.InertialUtility.Inertial">Inertial</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.LinkUtility.html#blenderproc.python.types.LinkUtility.Link">Link</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Api</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.camera.html#module-blenderproc.camera">bproc.camera</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.constructor.html#module-blenderproc.constructor">bproc.constructor</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.filter.html#module-blenderproc.filter">bproc.filter</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.lighting.html#module-blenderproc.lighting">bproc.lighting</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.loader.html#module-blenderproc.loader">bproc.loader</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.material.html#module-blenderproc.material">bproc.material</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.math.html#module-blenderproc.math">bproc.math</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.object.html#module-blenderproc.object">bproc.object</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.postprocessing.html#module-blenderproc.postprocessing">bproc.postprocessing</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.renderer.html#module-blenderproc.renderer">bproc.renderer</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.sampler.html#module-blenderproc.sampler">bproc.sampler</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.types.html#module-blenderproc.types">bproc.types</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.utility.html#module-blenderproc.utility">bproc.utility</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.world.html#module-blenderproc.world">bproc.world</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.api.writer.html#module-blenderproc.writer">bproc.writer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Internal</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.sampler.html">bproc.python.sampler</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.sampler.Front3DPointInRoomSampler.html#blenderproc.python.sampler.Front3DPointInRoomSampler.Front3DPointInRoomSampler">Front3DPointInRoomSampler</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.sampler.ReplicaPointInRoomSampler.html#blenderproc.python.sampler.ReplicaPointInRoomSampler.ReplicaPointInRoomSampler">ReplicaPointInRoomSampler</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.sampler.SuncgPointInRoomSampler.html#blenderproc.python.sampler.SuncgPointInRoomSampler.SuncgPointInRoomSampler">SuncgPointInRoomSampler</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.sampler.Disk.html#blenderproc.python.sampler.Disk._Disk">_Disk</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.sampler.UniformSO3.html#blenderproc.python.sampler.UniformSO3._UniformSO3">_UniformSO3</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.sampler.UpperRegionSampler.html#blenderproc.python.sampler.UpperRegionSampler.Region2D">Region2D</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.types.html">bproc.python.types</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.ArmatureUtility.html#blenderproc.python.types.ArmatureUtility.Armature">Armature</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.EntityUtility.html#blenderproc.python.types.EntityUtility.Entity">Entity</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.LightUtility.html#blenderproc.python.types.LightUtility.Light">Light</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.MaterialUtility.html#blenderproc.python.types.MaterialUtility.Material">Material</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.MeshObjectUtility.html#blenderproc.python.types.MeshObjectUtility.MeshObject">MeshObject</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.StructUtility.html#blenderproc.python.types.StructUtility.Struct">Struct</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.URDFUtility.html#blenderproc.python.types.URDFUtility.URDFObject">URDFObject</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.InertialUtility.html#blenderproc.python.types.InertialUtility.Inertial">Inertial</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.types.LinkUtility.html#blenderproc.python.types.LinkUtility.Link">Link</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.utility.html">bproc.python.utility</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.BlockStopWatch">BlockStopWatch</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.LabelIdMapping.html#blenderproc.python.utility.LabelIdMapping.LabelIdMapping">LabelIdMapping</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.UndoAfterExecution">UndoAfterExecution</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.CollisionUtility.html#blenderproc.python.utility.CollisionUtility.CollisionUtility">CollisionUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.DefaultConfig.html#blenderproc.python.utility.DefaultConfig.DefaultConfig">DefaultConfig</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.GlobalStorage.html#blenderproc.python.utility.GlobalStorage.GlobalStorage">GlobalStorage</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.Initializer.html#blenderproc.python.utility.Initializer._Initializer">_Initializer</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.InstallUtility.html#blenderproc.python.utility.InstallUtility.InstallUtility">InstallUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.MaterialGetter.html#blenderproc.python.utility.MaterialGetter.MaterialGetter">MaterialGetter</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.MathUtility.html#blenderproc.python.utility.MathUtility.MathUtility">MathUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.SetupUtility.html#blenderproc.python.utility.SetupUtility.SetupUtility">SetupUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.KeyFrame">KeyFrame</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.NumpyEncoder">NumpyEncoder</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility.Utility">Utility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.utility.Utility.html#blenderproc.python.utility.Utility._KeyFrameState">_KeyFrameState</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.filter.html">bproc.python.filter</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.filter.Filter.html#blenderproc.python.filter.Filter._Filter">_Filter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.lighting.html">bproc.python.lighting</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.lighting.SuncgLighting.html#blenderproc.python.lighting.SuncgLighting._SuncgLighting">_SuncgLighting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.loader.html">bproc.python.loader</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.AMASSLoader.html#blenderproc.python.loader.AMASSLoader._AMASSLoader">_AMASSLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.BlendLoader.html#blenderproc.python.loader.BlendLoader._BlendLoader">_BlendLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.BopLoader.html#blenderproc.python.loader.BopLoader._BopLoader">_BopLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.CCMaterialLoader.html#blenderproc.python.loader.CCMaterialLoader._CCMaterialLoader">_CCMaterialLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.Front3DLoader.html#blenderproc.python.loader.Front3DLoader._Front3DLoader">_Front3DLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.HavenMaterialLoader.html#blenderproc.python.loader.HavenMaterialLoader.HavenMaterialLoader">HavenMaterialLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.IKEALoader.html#blenderproc.python.loader.IKEALoader._IKEALoader">_IKEALoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.Pix3DLoader.html#blenderproc.python.loader.Pix3DLoader._Pix3DLoader">_Pix3DLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.RockEssentialsRockLoader.html#blenderproc.python.loader.RockEssentialsRockLoader.RockEssentialsRockLoader">RockEssentialsRockLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.SceneNetLoader.html#blenderproc.python.loader.SceneNetLoader._SceneNetLoader">_SceneNetLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.ShapeNetLoader.html#blenderproc.python.loader.ShapeNetLoader._ShapeNetLoader">_ShapeNetLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.SuncgLoader.html#blenderproc.python.loader.SuncgLoader._SuncgLoader">_SuncgLoader</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.loader.TextureLoader.html#blenderproc.python.loader.TextureLoader._TextureLoader">_TextureLoader</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.object.html">bproc.python.object</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.object.FaceSlicer.html#blenderproc.python.object.FaceSlicer.FaceSlicer">FaceSlicer</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.object.ObjectReplacer.html#blenderproc.python.object.ObjectReplacer._ObjectReplacer">_ObjectReplacer</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.object.OnSurfaceSampler.html#blenderproc.python.object.OnSurfaceSampler._OnSurfaceSampler">_OnSurfaceSampler</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.object.PhysicsSimulation.html#blenderproc.python.object.PhysicsSimulation._PhysicsSimulation">_PhysicsSimulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.postprocessing.html">bproc.python.postprocessing</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.postprocessing.PostProcessingUtility.html#blenderproc.python.postprocessing.PostProcessingUtility._PostProcessingUtility">_PostProcessingUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.postprocessing.StereoGlobalMatching.html#blenderproc.python.postprocessing.StereoGlobalMatching._StereoGlobalMatching">_StereoGlobalMatching</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.renderer.html">bproc.python.renderer</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.renderer.FlowRendererUtility.html#blenderproc.python.renderer.FlowRendererUtility._FlowRendererUtility">_FlowRendererUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.renderer.NOCSRendererUtility.html#blenderproc.python.renderer.NOCSRendererUtility._NOCSRendererUtility">_NOCSRendererUtility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.tests.html">bproc.python.tests</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.tests.SilentMode.html#blenderproc.python.tests.SilentMode.SilentMode">SilentMode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../../../blenderproc.python.writer.html">bproc.python.writer</a><ul>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.writer.BopWriterUtility.html#blenderproc.python.writer.BopWriterUtility._BopWriterUtility">_BopWriterUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.writer.CocoWriterUtility.html#blenderproc.python.writer.CocoWriterUtility._CocoWriterUtility">_CocoWriterUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.writer.GifWriterUtility.html#blenderproc.python.writer.GifWriterUtility._GifWriterUtility">_GifWriterUtility</a></li>
<li class="toctree-l2"><a class="reference external" href="../../../blenderproc.python.writer.WriterUtility.html#blenderproc.python.writer.WriterUtility._WriterUtility">_WriterUtility</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">BlenderProc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">BOP with object pose sampling and physics positioning</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/examples/datasets/bop_object_physics_positioning/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bop-with-object-pose-sampling-and-physics-positioning">
<h1>BOP with object pose sampling and physics positioning<a class="headerlink" href="#bop-with-object-pose-sampling-and-physics-positioning" title="Link to this heading"></a></h1>
<a class="reference external image-reference" href="../../../images/bop_object_physics_positioning_rendering.jpg"><img alt="" src="../../../_images/bop_object_physics_positioning_rendering.jpg" /></a>
<p>This example serves as the basis for generating the synthetic data provided at the BOP Challenge 2020. BOP objects from specified datasets are randomly chosen and dropped into an open cube with randomized PBR textures. Object material properties and light sources are also randomized. Samples cameras looking at objects. Outputs RGB, depth, segmentation masks, Coco annotations and object poses in BOP format.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>Make sure that you downloaded the <a class="reference external" href="https://bop.felk.cvut.cz/datasets/">BOP datasets</a>.</p>
<p>Execute in the BlenderProc main directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blenderproc</span> <span class="n">download</span> <span class="n">cc_textures</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blenderproc</span> <span class="n">run</span> <span class="n">examples</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">bop_object_physics_positioning</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span>
              <span class="o">&lt;</span><span class="n">path_to_bop_data</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="n">bop_dataset_name</span><span class="o">&gt;</span>
              <span class="n">resources</span><span class="o">/</span><span class="n">cctextures</span>
              <span class="n">examples</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">bop_object_physics_positioning</span><span class="o">/</span><span class="n">output</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">examples/datasets/bop_object_physics_positioning/main.py</span></code>: path to the python file with pipeline configuration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;path_to_bop_data&gt;</span></code>: path to a folder containing BOP datasets</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;bop_dataset_name&gt;</span></code>: name of BOP dataset for which ground truth should be saved, e.g. ycbv</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resources/cctextures</span></code>: path to CCTextures folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/datasets/bop_object_physics_positioning/output</span></code>: path to an output folder</p></li>
</ul>
</section>
<section id="generate-a-dataset">
<h2>Generate a dataset<a class="headerlink" href="#generate-a-dataset" title="Link to this heading"></a></h2>
<p>To aggregate data and labels over multiple scenes, simply run the script multiple times using the same command. As data is saved in chunks of 1000 images, you can easily distribute the data generation by running the scripts on different machines/servers and then collecting all chunks.</p>
</section>
<section id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Load T-LESS BOP models: <code class="docutils literal notranslate"><span class="pre">bproc.loader.load_bop_objs()</span></code>.</p></li>
<li><p>Load LM BOP models: <code class="docutils literal notranslate"><span class="pre">bproc.loader.load_bop_objs</span></code>.</p></li>
<li><p>Load <code class="docutils literal notranslate"><span class="pre">&lt;args:1&gt;</span></code> (YCB-V) BOP models: <code class="docutils literal notranslate"><span class="pre">bproc.loader.load_bop_objs</span></code>.</p></li>
<li><p>Sample colors for T-LESS models: <code class="docutils literal notranslate"><span class="pre">mat.set_principled_shader_value()</span></code>.</p></li>
<li><p>Sample roughness and specular values for all objects: <code class="docutils literal notranslate"><span class="pre">mat.set_principled_shader_value()</span></code>.</p></li>
<li><p>Construct planes: <code class="docutils literal notranslate"><span class="pre">bproc.object.create_primiative()</span></code>.</p></li>
<li><p>Switch to a light emission shader for the top plane.</p></li>
<li><p>Load CCTexture materials: <code class="docutils literal notranslate"><span class="pre">bproc.loader.load_ccmaterials()</span></code>.</p></li>
<li><p>Sample a material for the other planes: <code class="docutils literal notranslate"><span class="pre">plane.replace_materials()</span></code>.</p></li>
<li><p>Sample objects poses: <code class="docutils literal notranslate"><span class="pre">bproc.object.sample_poses()</span></code>.</p></li>
<li><p>Perform physics simulation: <code class="docutils literal notranslate"><span class="pre">bproc.object.simulate_physics_and_fix_final_poses()</span></code>.</p></li>
<li><p>Sample upright objects poses on surface.</p></li>
<li><p>Sample point light source.</p></li>
<li><p>Sample camera poses <code class="docutils literal notranslate"><span class="pre">bproc.add_camera_pose()</span></code>.</p></li>
<li><p>Render RGB and depth: <code class="docutils literal notranslate"><span class="pre">bproc.renderer</span></code>.</p></li>
<li><p>Write BOP data: <code class="docutils literal notranslate"><span class="pre">bproc.writer.write_bop</span></code>.</p></li>
</ul>
</section>
<section id="python-file-main-py">
<h2>Python file (main.py)<a class="headerlink" href="#python-file-main-py" title="Link to this heading"></a></h2>
<section id="bop-loader">
<h3>BOP Loader<a class="headerlink" href="#bop-loader" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># load distractor bop objects</span>
<span class="n">distractor_bop_objs</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_bop</span><span class="p">(</span><span class="n">bop_dataset_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">bop_parent_path</span><span class="p">,</span> <span class="s1">&#39;tless&#39;</span><span class="p">),</span>
                                     <span class="n">model_type</span> <span class="o">=</span> <span class="s1">&#39;cad&#39;</span><span class="p">,</span>
                                     <span class="n">mm2m</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                     <span class="n">sample_objects</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                     <span class="n">num_of_objs_to_sample</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">distractor_bop_objs</span> <span class="o">+=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_bop</span><span class="p">(</span><span class="n">bop_dataset_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">bop_parent_path</span><span class="p">,</span> <span class="s1">&#39;lm&#39;</span><span class="p">),</span>
                                      <span class="n">mm2m</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                      <span class="n">sample_objects</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                      <span class="n">num_of_objs_to_sample</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># load a random sample of bop objects into the scene</span>
<span class="n">sampled_bop_objs</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_bop</span><span class="p">(</span><span class="n">bop_dataset_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">bop_parent_path</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">bop_dataset_name</span><span class="p">),</span>
                                         <span class="n">mm2m</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                         <span class="n">sample_objects</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                         <span class="n">num_of_objs_to_sample</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">bproc</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_bop_intrinsics</span><span class="p">(</span><span class="n">bop_dataset_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">bop_parent_path</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">bop_dataset_name</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Here we are sampling BOP objects from 3 different datasets.</p></li>
<li><p>We load 3 random objects from LM and T-LESS datasets, and 10 objects from the dataset given by <code class="docutils literal notranslate"><span class="pre">&quot;&lt;args:1&gt;&quot;</span></code> (e.g. ycbv in this case).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;obj.set_shading_mode('auto')&quot;</span></code> sets the shading for these corresponding objects to auto smoothing. This looks more realistic for meshes that have both sharp edges and curved surfaces like in YCB-V.</p></li>
<li><p>In this example, <code class="docutils literal notranslate"><span class="pre">args.bop_dataset_name</span></code>(ycbv) dataset intrinsics are used when rendering by <code class="docutils literal notranslate"><span class="pre">bproc.loader.load_bop_intrinsics()</span></code></p></li>
</ul>
</section>
<section id="material-manipulator">
<h3>Material Manipulator<a class="headerlink" href="#material-manipulator" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># set shading and physics properties and randomize PBR materials</span>
<span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sampled_bop_objs</span> <span class="o">+</span> <span class="n">distractor_bop_objs</span><span class="p">):</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">set_shading_mode</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>

    <span class="n">mat</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_materials</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_cp</span><span class="p">(</span><span class="s2">&quot;bop_dataset_name&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;itodd&#39;</span><span class="p">,</span> <span class="s1">&#39;tless&#39;</span><span class="p">]:</span>
        <span class="n">grey_col</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
        <span class="n">mat</span><span class="o">.</span><span class="n">set_principled_shader_value</span><span class="p">(</span><span class="s2">&quot;Base Color&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">grey_col</span><span class="p">,</span> <span class="n">grey_col</span><span class="p">,</span> <span class="n">grey_col</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">mat</span><span class="o">.</span><span class="n">set_principled_shader_value</span><span class="p">(</span><span class="s2">&quot;Roughness&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
    <span class="n">mat</span><span class="o">.</span><span class="n">set_principled_shader_value</span><span class="p">(</span><span class="s2">&quot;Specular&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Sample grey colors for T-LESS object’s materials using <code class="docutils literal notranslate"><span class="pre">mat.set_principled_shader_value()</span></code> function.</p></li>
<li><p>Sample <code class="docutils literal notranslate"><span class="pre">specular</span></code> and <code class="docutils literal notranslate"><span class="pre">roughness</span></code> values for object’s materials from all datasets using <code class="docutils literal notranslate"><span class="pre">mat.set_principled_shader_value()</span></code> function.</p></li>
</ul>
</section>
<section id="basic-mesh-initializer">
<h3>Basic Mesh Initializer<a class="headerlink" href="#basic-mesh-initializer" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">room_planes</span> <span class="o">=</span> <span class="p">[</span><span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">create_primitive</span><span class="p">(</span><span class="s1">&#39;PLANE&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span>
               <span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">create_primitive</span><span class="p">(</span><span class="s1">&#39;PLANE&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">1.570796</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
               <span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">create_primitive</span><span class="p">(</span><span class="s1">&#39;PLANE&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="p">[</span><span class="mf">1.570796</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
               <span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">create_primitive</span><span class="p">(</span><span class="s1">&#39;PLANE&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.570796</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
               <span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">create_primitive</span><span class="p">(</span><span class="s1">&#39;PLANE&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.570796</span><span class="p">,</span> <span class="mi">0</span><span class="p">])]</span>
<span class="k">for</span> <span class="n">plane</span> <span class="ow">in</span> <span class="n">room_planes</span><span class="p">:</span>
    <span class="n">plane</span><span class="o">.</span><span class="n">enable_rigidbody</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">collision_shape</span><span class="o">=</span><span class="s1">&#39;BOX&#39;</span><span class="p">,</span> <span class="n">friction</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">,</span> <span class="n">linear_damping</span> <span class="o">=</span> <span class="mf">0.99</span><span class="p">,</span> <span class="n">angular_damping</span> <span class="o">=</span> <span class="mf">0.99</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Construct minimal 4m x 4m x 4m room from 6 planes</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">&quot;cp_physics&quot;:</span> <span class="pre">False</span></code> to fix the planes during any simulations</p></li>
<li><p>Give ground planes a BOX collision shape since they behave better.</p></li>
</ul>
</section>
<section id="id1">
<h3>Material Manipulator<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">light_plane</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">create_primitive</span><span class="p">(</span><span class="s1">&#39;PLANE&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="n">light_plane</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="s1">&#39;light_plane&#39;</span><span class="p">)</span>
<span class="n">light_plane_material</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s1">&#39;light_material&#39;</span><span class="p">)</span>
<span class="n">light_plane_material</span><span class="o">.</span><span class="n">make_emissive</span><span class="p">(</span><span class="n">emission_strength</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span>
                                   <span class="n">emission_color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))</span>
<span class="n">light_plane</span><span class="o">.</span><span class="n">replace_materials</span><span class="p">(</span><span class="n">light_plane_material</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>For the top light plane, switch to an Emission shader and sample <code class="docutils literal notranslate"><span class="pre">emision_color</span></code> and <code class="docutils literal notranslate"><span class="pre">emission_strength</span></code> values of the emitted light.</p></li>
</ul>
</section>
<section id="ccmaterial-loader">
<h3>CCMaterial Loader<a class="headerlink" href="#ccmaterial-loader" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cc_textures</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load_ccmaterials</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">cc_textures_path</span><span class="p">)</span>
<span class="n">random_cc_texture</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">cc_textures</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Load a random CC0Texture that was downloaded from <a class="reference external" href="https://cc0textures.com/">https://cc0textures.com/</a></p></li>
</ul>
</section>
<section id="entity-manipulator">
<h3>Entity Manipulator<a class="headerlink" href="#entity-manipulator" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">plane</span> <span class="ow">in</span> <span class="n">room_planes</span><span class="p">:</span>
    <span class="n">plane</span><span class="o">.</span><span class="n">replace_materials</span><span class="p">(</span><span class="n">random_cc_texture</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Sample a CCTextures material once for all loaded ground_planes.</p></li>
</ul>
</section>
<section id="object-pose-sampler">
<h3>Object Pose Sampler<a class="headerlink" href="#object-pose-sampler" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a function that samples 6-DoF poses</span>
<span class="k">def</span> <span class="nf">sample_pose_func</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">bproc</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">MeshObject</span><span class="p">):</span>
    <span class="nb">min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">([</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
    <span class="nb">max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">])</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">set_location</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">))</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">set_rotation_euler</span><span class="p">(</span><span class="n">bproc</span><span class="o">.</span><span class="n">sampler</span><span class="o">.</span><span class="n">uniformSO3</span><span class="p">())</span>

<span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">sample_poses</span><span class="p">(</span><span class="n">objects_to_sample</span> <span class="o">=</span> <span class="n">sampled_bop_objs</span> <span class="o">+</span> <span class="n">distractor_bop_objs</span><span class="p">,</span>
                        <span class="n">sample_pose_func</span> <span class="o">=</span> <span class="n">sample_pose_func</span><span class="p">,</span>
                        <span class="n">max_tries</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Samples initial object poses before applying physics</p></li>
<li><p>For all <code class="docutils literal notranslate"><span class="pre">&quot;objects_to_sample&quot;</span></code>, i.e. with <code class="docutils literal notranslate"><span class="pre">&quot;cp_physics&quot;:</span> <span class="pre">True</span></code>, uniformly sample a position in the specified range and a uniform SO3 rotation. Resamples if collisions occur.</p></li>
</ul>
</section>
<section id="physics-positioning">
<h3>Physics Positioning<a class="headerlink" href="#physics-positioning" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">simulate_physics_and_fix_final_poses</span><span class="p">(</span><span class="n">min_simulation_time</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                                <span class="n">max_simulation_time</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                                <span class="n">check_object_interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                                <span class="n">substeps_per_frame</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
                                                <span class="n">solver_iters</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Performs physics simuluation, i.e. dropping objects on the floor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;min_simulation_time&quot;,</span> <span class="pre">&quot;max_simulation_time&quot;</span></code> in seconds</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;check_object_interval&quot;</span></code> after which objects are checked to stand still</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;solver_iters&quot;:</span> <span class="pre">25</span></code> increase if physics glitches occur.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;substeps_per_frame&quot;:</span> <span class="pre">20</span></code> increase if physics glitches occur.</p></li>
</ul>
</section>
<section id="light-sampler">
<h3>Light Sampler<a class="headerlink" href="#light-sampler" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">light_point</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Light</span><span class="p">()</span>
<span class="n">light_point</span><span class="o">.</span><span class="n">set_energy</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">light_point</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">sampler</span><span class="o">.</span><span class="n">shell</span><span class="p">(</span><span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">radius_min</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">radius_max</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">,</span>
                        <span class="n">elevation_min</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">elevation_max</span> <span class="o">=</span> <span class="mi">89</span><span class="p">,</span> <span class="n">uniform_volume</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">light_point</span><span class="o">.</span><span class="n">set_location</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Samples an additional point light source (next to ceiling) in a <code class="docutils literal notranslate"><span class="pre">&quot;bproc.sampler.shell&quot;</span></code> around the origin.</p></li>
</ul>
</section>
<section id="camera-sampler">
<h3>Camera Sampler<a class="headerlink" href="#camera-sampler" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">poses</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">poses</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="c1"># Sample location</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">sampler</span><span class="o">.</span><span class="n">shell</span><span class="p">(</span><span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                            <span class="n">radius_min</span> <span class="o">=</span> <span class="mf">0.61</span><span class="p">,</span>
                            <span class="n">radius_max</span> <span class="o">=</span> <span class="mf">1.24</span><span class="p">,</span>
                            <span class="n">elevation_min</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
                            <span class="n">elevation_max</span> <span class="o">=</span> <span class="mi">89</span><span class="p">,</span>
                            <span class="n">uniform_volume</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
    <span class="c1"># Determine point of interest in scene as the object closest to the mean of a subset of objects</span>
    <span class="n">poi</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">compute_poi</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">sampled_bop_objs</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
    <span class="c1"># Compute rotation based on vector going from location towards poi</span>
    <span class="n">rotation_matrix</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">rotation_from_forward_vec</span><span class="p">(</span><span class="n">poi</span> <span class="o">-</span> <span class="n">location</span><span class="p">,</span> <span class="n">inplane_rot</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.7854</span><span class="p">,</span> <span class="mf">0.7854</span><span class="p">))</span>
    <span class="c1"># Add homog cam pose based on location an rotation</span>
    <span class="n">cam2world_matrix</span> <span class="o">=</span> <span class="n">bproc</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">build_transformation_mat</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">rotation_matrix</span><span class="p">)</span>

    <span class="c1"># Check that obstacles are at least 0.3 meter away from the camera and make sure the view interesting enough</span>
    <span class="k">if</span> <span class="n">bproc</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">perform_obstacle_in_view_check</span><span class="p">(</span><span class="n">cam2world_matrix</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">},</span> <span class="n">bop_bvh_tree</span><span class="p">):</span>
        <span class="c1"># Persist camera pose</span>
        <span class="n">bproc</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">add_camera_pose</span><span class="p">(</span><span class="n">cam2world_matrix</span><span class="p">)</span>
        <span class="n">poses</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Samples <code class="docutils literal notranslate"><span class="pre">&quot;poses&quot;:</span> <span class="pre">10</span></code> camera poses, where the camera location is sampled using a <code class="docutils literal notranslate"><span class="pre">bproc.sampler.shell</span></code> Provider with <code class="docutils literal notranslate"><span class="pre">&quot;uniform_elevation&quot;</span></code> sampling.</p></li>
<li><p>The camera rotation is defined by a point of interest (<code class="docutils literal notranslate"><span class="pre">&quot;poi&quot;</span></code>) plus a sampled <code class="docutils literal notranslate"><span class="pre">&quot;inplane_rot&quot;</span></code> in the specified range.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&quot;poi&quot;</span></code> is defined by the object closest to the mean position of all objects that are returned by the <code class="docutils literal notranslate"><span class="pre">&quot;brpoc.object.compute_poi&quot;</span></code> function, i.e. <code class="docutils literal notranslate"><span class="pre">&quot;size&quot;:</span> <span class="pre">10</span></code> objects from the target BOP dataset.</p></li>
<li><p>Camera poses undergo <code class="docutils literal notranslate"><span class="pre">&quot;obstacle_in_view_checks&quot;</span></code> with respect to all objects besides ground_plane (<code class="docutils literal notranslate"><span class="pre">&quot;excluded_objs_in_proximity_check&quot;</span></code>) to ensure that no objects are closer than <code class="docutils literal notranslate"><span class="pre">&quot;min&quot;:</span> <span class="pre">0.3</span></code> meters.</p></li>
</ul>
</section>
<section id="rgb-renderer">
<h3>Rgb Renderer<a class="headerlink" href="#rgb-renderer" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bproc</span><span class="o">.</span><span class="n">renderer</span><span class="o">.</span><span class="n">enable_depth_output</span><span class="p">(</span><span class="n">activate_antialiasing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Renders an RGB image and also outputs a depth images.</p></li>
</ul>
</section>
<section id="bop-writer">
<h3>Bop Writer<a class="headerlink" href="#bop-writer" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bproc</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">write_bop</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">output_dir</span><span class="p">,</span> <span class="s1">&#39;bop_data&#39;</span><span class="p">),</span>
                       <span class="n">dataset</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">bop_dataset_name</span><span class="p">,</span>
                       <span class="n">depths</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">],</span>
                       <span class="n">colors</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;colors&quot;</span><span class="p">],</span>
                       <span class="n">color_file_format</span> <span class="o">=</span> <span class="s2">&quot;JPEG&quot;</span><span class="p">,</span>
                       <span class="n">ignore_dist_thres</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Saves all pose and camera information that is provided in BOP datasets.</p></li>
<li><p>Only considers objects from the given <code class="docutils literal notranslate"><span class="pre">&quot;dataset&quot;:</span> <span class="pre">&quot;&lt;args:1&gt;&quot;</span></code></p></li>
<li><p>Saves the images as jpg</p></li>
</ul>
</section>
</section>
<section id="more-examples">
<h2>More examples<a class="headerlink" href="#more-examples" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="../bop_object_pose_sampling/README.md">bop_object_pose_sampling</a>: Sample BOP object and camera poses.</p></li>
<li><p><a class="reference external" href="../bop_scene_replication/README.md">bop_scene_replication</a>: Replicate the scenes and cameras from BOP datasets in simulation.</p></li>
<li><p><a class="reference external" href="../bop_object_on_surface_sampling/README.md">bop_object_on_surface_sampling</a>: Sample upright poses on plane and randomize materials</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, DLR RMC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>